<div class="breadcrumbs">
  <ul>
    <li>
      <a href="#/product" title=""><i class="fa fa-home"></i></a>/
    </li>
    <li><a title="">Product</a></li>
  </ul>
</div>

<div class="main-content">
  <div class="content-header">
    <div class="row">
      <div class="col-12">
        <h1>Product</h1>
      </div>
    </div>
  </div>

  <form
    name="categoryForm"
    role="form"
    [formGroup]="form"
    (ngSubmit)="submit()"
  >
    <div class="card">
      <div class="card-header">
        <h3 class="card-title">Create Category</h3>
      </div>
      <div class="card-body">
        <div class="mb-3 row">
          <label for="name" class="col-sm-2 col-form-label">Name</label>
          <div class="col-sm-10">
            <input
              type="text"
              class="form-control"
              id="name"
              formControlName="name"
            />
          </div>
        </div>
        <!-- end of row -->

        <div class="mb-3 row">
          <label for="type" class="col-sm-2 col-form-label">Product Type</label>
          <div class="col-sm-10">
            <select
              type="text"
              class="form-control"
              id="type"
              formControlName="type"
            >
            <option value="null">Select Product Type</option>

              <option
                *ngFor="let item of productTypes | keys"
                [value]="item.key"
              >
                {{ item.value }}
              </option>
            </select>
          </div>
        </div>
        <!-- end of row -->

        <div class="mb-3 row">
          <label for="attribute_family_id" class="col-sm-2 col-form-label"
            >Attribute Family</label
          >
          <div class="col-sm-10">
            <select
              type="text"
              class="form-control"
              id="attribute_family_id"
              formControlName="attribute_family_id"
            >
              <option value="null">Select attribute family</option>
              <option
                *ngFor="let attributeFamily of attributeFamilies"
                [ngValue]="attributeFamily.id"
              >
                {{ attributeFamily.name }}
              </option>
            </select>
          </div>
        </div>
        <!-- end of row -->

        <div class="mb-3 row">
          <label for="status" class="col-sm-2 col-form-label">Status</label>
          <div class="col-sm-10">
            <select
              id="status"
              class="form-select"
              aria-label="Default select example"
              formControlName="status"
            >
              <option>Select Status</option>
              <option value="0">InActive</option>
              <option value="1">Active</option>
            </select>
          </div>
        </div>
        <!-- end of row -->

        <ngb-accordion #accordion="ngbAccordion" activeIds="['panel-1']" *ngIf="selectedAttributeFamily">
          <ng-container *ngFor="let group of selectedAttributeFamily.groups; let i = index">
            <ngb-panel [id]="'panel-' + (i + 1)"  [formGroupName]="group.name">
              <ng-template ngbPanelHeader let-opened="opened">
                <div class="d-flex align-items-center justify-content-between">
                  <button
                    ngbPanelToggle
                    class="btn container-fluid text-start pl-0"
                  >
                    <i
                      class="fas"
                      [ngClass]="{
                        'fa-chevron-down': opened,
                        'fa-chevron-right': !opened
                      }"
                    ></i>
                    {{ group.name }}
                  </button>
                </div>
              </ng-template>
              <ng-template ngbPanelContent>

                <div class="mb-3 row" *ngFor="let attribute of group.attributes">


                  <app-dynamic-control [attribute]="attribute" [form]="form" [group]="group"></app-dynamic-control>

                  <!-- <label for="{{ attribute.code }}" class="col-sm-2 col-form-label">{{ attribute.name}}</label>
                  <div class="col-sm-10">
                    <input
                      [type]="attribute.type"
                      class="form-control"
                      [id]="attribute.code"
                      formControlName="{{ attribute.code }}"
                      />
                  </div> -->
                </div>
                <!-- end of row -->


                <table class="table">
                  <thead>
                    <tr>
                      <th>Code</th>
                      <th>Name</th>
                      <th>Type</th>
                      <th></th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="let attribute of group.attributes">
                      <td>{{ attribute.code }}</td>
                      <td>{{ attribute.name }}</td>
                      <td>{{ attribute.type }}</td>
                      <td>

                      </td>
                    </tr>
                  </tbody>

                </table>
              </ng-template>
            </ngb-panel>
          </ng-container>
        </ngb-accordion>

      </div> <!--  end of card body -->
      <div class="card-footer">
        <button
          class="btn btn-primary float-end"
          type="submit"
          [disabled]="form.invalid || isSaving"
        >
          Submit
        </button>
        <button
          class="btn btn-secondary float-end me-2"
          type="button"
          (click)="goBack()"
        >
          Back
        </button>
      </div>
      <!-- card footer-->
    </div>
  </form>
</div>
